import{bb as T,S as L,bx as ee,X as te,ap as le,P as $,at as _,bg as D,ak as v,bc as ae,aw as ne,$ as b,R as w,p as l,aM as oe,by as se,k as g,bs as q,a7 as ie,bt as ue,A as re,a9 as I,be as z,aD as ce,ba as j,a2 as de,bz as E,a5 as fe,d as me,j as ve,o as be,c as Ve,m as C,H as N,w as m,ae as ge,q as y,V as he,v as ye,af as pe,z as F,al as U,bA as Ce,ah as ke,ai as A,am as P,E as Ie,ad as Se,aC as xe}from"./index.03179c4f.js";import{u as G,b as M,m as _e,a as we}from"./route-block.3f60eb7d.js";import{b as Be,m as Fe,u as Ae,f as Pe,c as Le,V as Te,a as J}from"./VForm.9012b0c0.js";import{V as $e}from"./VSnackbar.72baf353.js";const H=Symbol.for("vuetify:selection-control-group"),W=T({color:String,disabled:Boolean,error:Boolean,id:String,inline:Boolean,falseIcon:L,trueIcon:L,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:ee},...te(),...le()},"VSelectionControlGroup");$({name:"VSelectionControlGroup",props:{defaultsTarget:{type:String,default:"VSelectionControl"},...W()},emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:d}=a;const t=_(e,"modelValue"),o=D(),s=v(()=>e.id||`v-selection-control-group-${o}`),i=v(()=>e.name||s.value);return ae(H,{modelValue:t}),ne({[e.defaultsTarget]:{color:b(e,"color"),disabled:b(e,"disabled"),density:b(e,"density"),error:b(e,"error"),inline:b(e,"inline"),modelValue:t,multiple:v(()=>!!e.multiple||e.multiple==null&&Array.isArray(t.value)),name:i,falseIcon:b(e,"falseIcon"),trueIcon:b(e,"trueIcon"),readonly:b(e,"readonly"),ripple:b(e,"ripple"),type:b(e,"type"),valueComparator:b(e,"valueComparator")}}),w(()=>{var c;return l("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":e.inline}],"aria-labelled-by":e.type==="radio"?s.value:void 0,role:e.type==="radio"?"radiogroup":void 0},[(c=d.default)==null?void 0:c.call(d)])}),{}}});const X=T({label:String,trueValue:null,falseValue:null,value:null,...W()},"VSelectionControl");function De(e){const a=z(H,void 0),{densityClasses:d}=ce(e),t=_(e,"modelValue"),o=v(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),s=v(()=>e.falseValue!==void 0?e.falseValue:!1),i=v(()=>!!e.multiple||e.multiple==null&&Array.isArray(t.value)),c=v({get(){const r=a?a.modelValue.value:t.value;return i.value?r.some(V=>e.valueComparator(V,o.value)):e.valueComparator(r,o.value)},set(r){if(e.readonly)return;const V=r?o.value:s.value;let h=V;i.value&&(h=r?[...j(t.value),V]:j(t.value).filter(k=>!e.valueComparator(k,o.value))),a?a.modelValue.value=h:t.value=h}}),{textColorClasses:f,textColorStyles:n}=de(v(()=>c.value&&!e.error&&!e.disabled?e.color:void 0)),u=v(()=>c.value?e.trueIcon:e.falseIcon);return{group:a,densityClasses:d,trueValue:o,falseValue:s,model:c,textColorClasses:f,textColorStyles:n,icon:u}}const Oe=oe()({name:"VSelectionControl",directives:{Ripple:se},inheritAttrs:!1,props:X(),emits:{"update:modelValue":e=>!0},setup(e,a){let{attrs:d,slots:t}=a;const{densityClasses:o,icon:s,model:i,textColorClasses:c,textColorStyles:f,trueValue:n}=De(e),u=D(),r=v(()=>e.id||`input-${u}`),V=g(!1),h=g(!1),k=g();function S(p){V.value=!0,(!E||E&&p.target.matches(":focus-visible"))&&(h.value=!0)}function x(){V.value=!1,h.value=!1}function B(p){i.value=p.target.checked}return w(()=>{var p,O;const R=t.label?t.label({label:e.label,props:{for:r.value}}):e.label,[Y,Z]=q(d);return l("div",I({class:["v-selection-control",{"v-selection-control--dirty":i.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":V.value,"v-selection-control--focus-visible":h.value,"v-selection-control--inline":e.inline},o.value]},Y),[l("div",{class:["v-selection-control__wrapper",c.value],style:f.value},[(p=t.default)==null?void 0:p.call(t),ie(l("div",{class:["v-selection-control__input"]},[s.value&&l(re,{key:"icon",icon:s.value},null),l("input",I({ref:k,checked:i.value,disabled:e.disabled,id:r.value,onBlur:x,onFocus:S,onInput:B,"aria-readonly":e.readonly,type:e.type,value:n.value,name:e.name,"aria-checked":e.type==="checkbox"?i.value:void 0},Z),null),(O=t.input)==null?void 0:O.call(t,{model:i,textColorClasses:c,textColorStyles:f,props:{onFocus:S,onBlur:x,id:r.value}})]),[[ue("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),R&&l(Be,{for:r.value,clickable:!0},{default:()=>[R]})])}),{isFocused:V,input:k}}}),K=T({indeterminate:Boolean,indeterminateIcon:{type:L,default:"$checkboxIndeterminate"},...X({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),Q=$({name:"VCheckboxBtn",props:K(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,a){let{slots:d}=a;const t=_(e,"indeterminate"),o=_(e,"modelValue");function s(f){t.value&&(t.value=!1)}const i=v(()=>e.indeterminate?e.indeterminateIcon:e.falseIcon),c=v(()=>e.indeterminate?e.indeterminateIcon:e.trueIcon);return w(()=>l(Oe,I(e,{modelValue:o.value,"onUpdate:modelValue":[f=>o.value=f,s],class:"v-checkbox-btn",type:"checkbox",inline:!0,falseIcon:i.value,trueIcon:c.value,"aria-checked":e.indeterminate?"mixed":void 0}),d)),{}}});function Re(e){return fe(e,Object.keys(Q.props))}const je=$({name:"VCheckbox",inheritAttrs:!1,props:{...Fe(),...K()},emits:{"update:focused":e=>!0},setup(e,a){let{attrs:d,slots:t}=a;const{isFocused:o,focus:s,blur:i}=Ae(e),c=D(),f=v(()=>e.id||`checkbox-${c}`);return w(()=>{const[n,u]=q(d),[r,V]=Pe(e),[h,k]=Re(e);return l(Le,I({class:"v-checkbox"},n,r,{id:f.value,focused:o.value}),{...t,default:S=>{let{id:x,isDisabled:B,isReadonly:p}=S;return l(Q,I(h,{id:x.value,disabled:B.value,readonly:p.value},u,{onFocus:s,onBlur:i}),t)}})}),{}}});var Ee=Symbol("ability");function Ne(){var e=z(Ee);if(!e)throw new Error("Cannot inject Ability instance because it was not provided");return e}function Ue(e){return"a"in e?"a":"this"in e?"this":"an"in e?"an":""}me({name:"Can",props:{I:String,do:String,a:[String,Function],an:[String,Function],this:[String,Function,Object],on:[String,Function,Object],not:Boolean,passThrough:Boolean,field:String},setup:function(a,d){var t=d.slots,o=a,s="do",i="on";if(s in a||(s="I",i=Ue(a)),!o[s])throw new Error("Neither `I` nor `do` prop was passed in <Can>");if(!t.default)throw new Error("Expects to receive default slot");var c=Ne();return function(){var f=c.can(o[s],o[i],o.field),n=a.not?!f:f;return a.passThrough?t.default({allowed:n,ability:c}):n?t.default():null}}});const Ge="/assets/auth-v2-login-illustration-bordered-dark.a595a9b7.png",Me="/assets/auth-v2-login-illustration-bordered-light.47ee3625.png",Je="/assets/auth-v2-login-illustration-dark.0878e8b9.png",qe="/assets/auth-v2-login-illustration-light.d1fd488d.png";const ze={class:"auth-wrapper d-flex align-center justify-center pa-4"},He={class:"position-relative my-sm-16"},We={class:"d-flex"},Xe=C("h5",{class:"text-h5 font-weight-semibold mb-1"}," Welcome to ILibrary! \u{1F44B}\u{1F3FB} ",-1),Ke=C("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1),Qe={class:"d-flex align-center justify-space-between flex-wrap mt-2 mb-4"},Ye=C("span",null,"Public register is closed.",-1),Ze={__name:"login",setup(e){const a=g(!1);G(qe,Je,Me,Ge,!0),G(we,_e);const d=g(!1),t=ve();g({email:void 0,password:void 0});const o=g(),s=g("joel.bradley.w@gmail.com"),i=g("87215765");g(!1);const c=()=>{xe.post("/auth/login",{username:s.value,password:i.value}).then(n=>{const{userData:u}=n.data.data;console.log(n),console.log(u),n.data.code==0?(localStorage.setItem("userAbilities",JSON.stringify(u.ability)),localStorage.setItem("userData",JSON.stringify(u)),localStorage.setItem("accessToken",JSON.stringify(n.data.data.accessToken).replaceAll('"',"")),t.push("/")):(console.log("LOGIN FAILED"),a.value=!0)}).catch(n=>{a.value=!0,console.log(n)})},f=()=>{var n;(n=o.value)==null||n.validate().then(({valid:u})=>{u&&c()})};return(n,u)=>(be(),Ve("div",ze,[C("div",He,[l(N,{src:n.authV1TopShape,class:"auth-v1-top-shape d-none d-sm-block"},null,8,["src"]),l(N,{src:n.authV1BottomShape,class:"auth-v1-bottom-shape d-none d-sm-block"},null,8,["src"]),l(Se,{class:"auth-card pa-4","max-width":"448"},{default:m(()=>[l(ge,{class:"justify-center"},{prepend:m(()=>[C("div",We,[l(y(he),{nodes:y(ye).app.logo},null,8,["nodes"])])]),default:m(()=>[l(pe,{class:"font-weight-bold text-h5 py-1"},{default:m(()=>[F(" ILibrary ")]),_:1})]),_:1}),l(U,{class:"pt-1"},{default:m(()=>[Xe,Ke]),_:1}),l(U,null,{default:m(()=>[l(y(Te),{ref_key:"refVForm",ref:o,onSubmit:Ce(f,["prevent"])},{default:m(()=>[l(ke,null,{default:m(()=>[l(A,{cols:"12"},{default:m(()=>[l(J,{modelValue:y(s),"onUpdate:modelValue":u[0]||(u[0]=r=>P(s)?s.value=r:null),label:"Email",type:"email"},null,8,["modelValue"])]),_:1}),l(A,{cols:"12"},{default:m(()=>[l(J,{modelValue:y(i),"onUpdate:modelValue":u[1]||(u[1]=r=>P(i)?i.value=r:null),label:"Password",type:y(d)?"text":"password","append-inner-icon":y(d)?"tabler-eye-off":"tabler-eye","onClick:appendInner":u[2]||(u[2]=r=>d.value=!y(d))},null,8,["modelValue","type","append-inner-icon"]),C("div",Qe,[l(je,{modelValue:n.remember,"onUpdate:modelValue":u[3]||(u[3]=r=>n.remember=r),label:"Remember me"},null,8,["modelValue"])]),l(Ie,{block:"",type:"submit"},{default:m(()=>[F(" Login ")]),_:1})]),_:1}),l(A,{cols:"12",class:"text-center text-base"},{default:m(()=>[Ye]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),l($e,{modelValue:y(a),"onUpdate:modelValue":u[4]||(u[4]=r=>P(a)?a.value=r:null),location:"top end",variant:"flat",color:"error"},{default:m(()=>[F(" Login failed. ")]),_:1},8,["modelValue"])])]))}};typeof M=="function"&&M(Ze);export{Ze as default};
